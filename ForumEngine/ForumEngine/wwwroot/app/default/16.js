(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{aJIM:function(t,e,i){"use strict";i.r(e),i.d(e,"BlogsModule",(function(){return It}));var s=i("1kSV"),o=i("ofXK"),r=i("3Pt+"),n=i("tyNb"),a=i("fXoL"),c=i("l7P3"),d=i("pVWW"),h=i("QpQk"),l=i("LEd3"),b=i("XDFV"),p=i("3nTv"),u=i("jyVE"),g=i("kCe6"),f=i("nD3/"),m=i("Hjmt"),v=i("/H0e"),I=i("4HLj"),A=i("oTv2");function P(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",5),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function w(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",6),a.Qb(3,"app-navigation-v2",7),a.bc("Action",(function(e){return a.uc(t),a.dc(2).toolbaraction(e)}))("SearchSelection",(function(e){return a.uc(t),a.dc(2).FindRecords(e)})),a.Pb(),a.Pb(),a.Qb(4,"div",8),a.Qb(5,"app-toolbar-v2",9),a.bc("Action",(function(e){return a.uc(t),a.dc(2).toolbaraction(e)}))("SelectAllCard",(function(e){return a.uc(t),a.dc(2).selectAll(e)})),a.Pb(),a.Qb(6,"div",10),a.Qb(7,"app-blog-list",11),a.bc("View",(function(e){return a.uc(t),a.dc(2).toolbaraction(e)}))("SelectedItems",(function(e){return a.uc(t),a.dc(2).getSelectedItems(e)})),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc(2);a.xb(3),a.kc("isAdmin",t.isAdmin)("FilterOptions",t.FilterOptions)("Options",t.SearchOptions),a.xb(2),a.kc("isAdmin",t.isAdmin)("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),a.xb(2),a.kc("route_path",t.route_path)("isAdmin",t.isAdmin)("isActionGranded",t.isActionGranded)}}function _(t,e){if(1&t&&(a.Qb(0,"div",2),a.Qb(1,"div",3),a.Qb(2,"div",4),a.Dc(3,P,3,0,"div",1),a.Dc(4,w,8,9,"div",1),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc();a.xb(3),a.kc("ngIf",!t.isAccessGranted),a.xb(1),a.kc("ngIf",t.isAccessGranted)}}function O(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"app-navigation-v2",7),a.bc("Action",(function(e){return a.uc(t),a.dc().toolbaraction(e)}))("SearchSelection",(function(e){return a.uc(t),a.dc().FindRecords(e)})),a.Pb(),a.Qb(2,"div",4),a.Qb(3,"div",10),a.Qb(4,"div",12),a.Qb(5,"app-toolbar-v2",9),a.bc("Action",(function(e){return a.uc(t),a.dc().toolbaraction(e)}))("SelectAllCard",(function(e){return a.uc(t),a.dc().selectAll(e)})),a.Pb(),a.Pb(),a.Qb(6,"app-blog-list",13),a.bc("View",(function(e){return a.uc(t),a.dc().toolbaraction(e)}))("SelectedItems",(function(e){return a.uc(t),a.dc().getSelectedItems(e)})),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc();a.xb(1),a.kc("isAdmin",t.isAdmin)("FilterOptions",t.FilterOptions)("Options",t.SearchOptions),a.xb(4),a.kc("isAdmin",t.isAdmin)("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),a.xb(1),a.kc("route_path",t.route_path)("isAdmin",t.isAdmin)}}let k=(()=>{class t{constructor(t,e,i,s,o,r,n){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.permission=o,this.router=r,this.route=n,this.isAdmin=!0,this.route_path="/blogs/",this.PublicView=!1,this.type=0,this.filteroptions$=this._store.pipe(Object(c.n)(d.b)),this.isloaded$=this._store.pipe(Object(c.n)(d.c)),this.categories$=this._store.pipe(Object(c.n)(d.a)),this.isItemSelected$=this._store.pipe(Object(c.n)(d.d)),this.records$=this._store.pipe(Object(c.n)(d.h)),this.pagination$=this._store.pipe(Object(c.n)(d.f)),this.auth$=this._store.pipe(Object(c.n)(b.a)),this.configs$=this._store.pipe(Object(c.n)(p.a)),this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="Blogs",this.subheading="Management",this.isItemsSelected=!1,this.IsLoaded=!1,this.Records=0,this.Pagination={},this.showReportLink=!1}ngOnInit(){this.auth$.subscribe(t=>{if(this.isAdmin){const e="1521396112858";this.permission.GrandResourceAccess(!1,e,"1521396141248",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}else this.isAccessGranted=!0,this.isActionGranded=!0}),this.SearchOptions=this.settingService.getSearchOptions(this.isAdmin),this.ToolbarOptions=this.settingService.getToolbarOptions(this.isAdmin),this.filteroptions$.subscribe(t=>{this.FilterOptions=Object.assign({},t),t.track_filter&&(this.loadRecords(this.FilterOptions),this.FilterOptions.track_filter=!1,this._store.dispatch(new h.m(this.FilterOptions)))}),this.records$.subscribe(t=>{this.Records=t}),this.pagination$.subscribe(t=>{this.Pagination=t}),this.isItemSelected$.subscribe(t=>{this.isItemsSelected=t}),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded?this.refreshStats():this.loadRecords(this.FilterOptions)}),this.categories$.subscribe(t=>{for(const e of t)this.SearchOptions.categories.push({key:e.id,value:e.title})}),this.route.params.subscribe(t=>{void 0!==t.tagname&&(console.log("tag filter initiated"),this.FilterOptions.tags=t.tagname,this.FilterOptions.track_filter=!0,this._store.dispatch(new h.m(this.FilterOptions))),void 0!==t.catname&&(this.FilterOptions.categoryname=t.catname,this.FilterOptions.track_filter=!0,this._store.dispatch(new h.m(this.FilterOptions))),void 0!==t.uname&&(this.FilterOptions.userid=t.uname,this.FilterOptions.track_filter=!0,this._store.dispatch(new h.m(this.FilterOptions))),void 0!==t.abuse&&("abuse"===t.abuse?(this.FilterOptions.loadabusereports=!0,this.showReportLink=!0):"normallist"===t.abuse&&(this.FilterOptions.loadabusereports=!1,this.showReportLink=!1),this.FilterOptions.track_filter=!0,this._store.dispatch(new h.m(this.FilterOptions)))})}loadRecords(t){this.coreService.renderAbuseReportBtn(this.SearchOptions.actions,t.loadabusereports),this.PublicView&&(t.ispublic=!0),this.dataService.LoadRecords(t)}selectAll(t){this._store.dispatch(new h.j(t))}toolbaraction(t){if(this.isActionGranded)switch(t.action){case"view":return void this.router.navigate([this.route_path+"profile/0"]);case"add":return void this.router.navigate([this.route_path+"process/0"]);case"abuse":return void this.router.navigate([this.route_path+"filter/abuse"]);case"normallist":return void this.router.navigate([this.route_path+"filter/normallist"]);case"reports":return void this.router.navigate([this.route_path+"reports"]);case"m_markas":return void this.ProcessActions(t.value);case"f_type":this._store.dispatch(new h.d({attr:"type",value:t.value}));break;case"f_isapproved":this._store.dispatch(new h.d({attr:"isapproved",value:t.value}));break;case"f_status":this._store.dispatch(new h.d({attr:"isenabled",value:t.value}));break;case"f_adult":this._store.dispatch(new h.d({attr:"isadult",value:t.value}));break;case"pagesize":this._store.dispatch(new h.d({attr:"pagesize",value:t.value}));break;case"m_filter":this._store.dispatch(new h.d({attr:"datefilter",value:t.value}));break;case"sort":this._store.dispatch(new h.d({attr:"direction",value:t.value}))}else this._store.dispatch(new l.c({title:"Permission Denied",text:"",css:"bg-danger"}))}FindRecords(t){const e=t.filters;e.tags="",e.pagenumber=1,e.track_filter=!0,this._store.dispatch(new h.m(e))}getSelectedItems(t){this.SelectedItems=t,this.isItemsSelected=this.SelectedItems.length>0}ProcessActions(t){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus;this.dataService.ProcessActions(this.SelectedItems,t)}}refreshStats(){this._store.dispatch(new h.h({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize})),this._store.dispatch(new l.d({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage}))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(c.h),a.Kb(u.a),a.Kb(g.a),a.Kb(f.a),a.Kb(m.a),a.Kb(n.f),a.Kb(n.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-blog-mainlist"]],inputs:{isAdmin:"isAdmin",route_path:"route_path",PublicView:"PublicView",type:"type"},decls:2,vars:2,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"m-b-40","m-t-40","text-center"],[1,"col-md-3"],[3,"isAdmin","FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"isAdmin","Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"route_path","isAdmin","isActionGranded","View","SelectedItems"],[1,"m-b-20"],[3,"route_path","isAdmin","View","SelectedItems"]],template:function(t,e){1&t&&(a.Dc(0,_,5,2,"div",0),a.Dc(1,O,7,8,"div",1)),2&t&&(a.kc("ngIf",e.isAdmin),a.xb(1),a.kc("ngIf",!e.isAdmin))},directives:[o.u,v.a,I.a,A.a],encapsulation:2}),t})(),S=(()=>{class t{constructor(){this.isAdmin=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"isAdmin"]],template:function(t,e){1&t&&a.Lb(0,"app-blog-mainlist",0),2&t&&a.kc("isAdmin",e.isAdmin)},directives:[k],encapsulation:2}),t})();var Q=i("cTdx"),y=i("o+qO");let L=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},providers:[u.a,g.a,Q.a],imports:[[o.c,y.a,n.j,r.l]]}),t})();var x=i("pdjO"),F=i("RDfn");function D(t,e){if(1&t&&(a.Qb(0,"div"),a.Lb(1,"img",20),a.Pb()),2&t){const t=a.dc();a.xb(1),a.lc("src",t.Info.cover_url,a.wc),a.lc("alt",t.Info.title)}}function R(t,e){if(1&t&&(a.Qb(0,"div",22),a.Lb(1,"img",23),a.Pb()),2&t){const t=e.$implicit,i=a.dc(2);a.xb(1),a.lc("src",t.img_url,a.wc),a.lc("alt",i.Info.title)}}function C(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",6),a.Dc(2,R,2,2,"div",21),a.Pb(),a.Pb()),2&t){const t=a.dc();a.xb(2),a.kc("ngForOf",t.Info.files)}}const G=function(t){return[t]};function T(t,e){if(1&t&&(a.Qb(0,"span"),a.Qb(1,"a",25),a.Fc(2),a.Pb(),a.Pb()),2&t){const t=e.$implicit;a.xb(1),a.kc("routerLink",a.oc(2,G,"/blogs/category/"+t.category.term)),a.xb(1),a.Gc(t.category.title)}}function j(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",0),a.Fc(2," Categories "),a.Pb(),a.Qb(3,"div",0),a.Dc(4,T,3,4,"span",24),a.Pb(),a.Lb(5,"hr"),a.Pb()),2&t){const t=a.dc();a.xb(4),a.kc("ngForOf",t.Info.category_list)}}function $(t,e){if(1&t&&(a.Qb(0,"span"),a.Qb(1,"a",26),a.Fc(2),a.Pb(),a.Pb()),2&t){const t=e.$implicit;a.xb(1),a.kc("routerLink",a.oc(2,G,"/blogs/tag/"+t.slug)),a.xb(1),a.Gc(t.title)}}function K(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",0),a.Fc(2," Tags: "),a.Pb(),a.Qb(3,"div",0),a.Dc(4,$,3,4,"span",24),a.Pb(),a.Lb(5,"hr"),a.Pb()),2&t){const t=a.dc();a.xb(4),a.kc("ngForOf",t.Info.tags_arr)}}function B(t,e){1&t&&(a.Qb(0,"span",27),a.Fc(1,"Blocked"),a.Pb())}function M(t,e){1&t&&(a.Qb(0,"span",28),a.Fc(1,"Active"),a.Pb())}function H(t,e){1&t&&(a.Qb(0,"span",29),a.Fc(1,"Approved"),a.Pb())}function N(t,e){1&t&&(a.Qb(0,"span",30),a.Fc(1,"Under Review"),a.Pb())}function V(t,e){1&t&&(a.Qb(0,"span",31),a.Fc(1,"Featured"),a.Pb())}function z(t,e){1&t&&(a.Qb(0,"span",27),a.Fc(1,"Adult"),a.Pb())}let E=(()=>{class t{constructor(){this.Info={},this.Author_FullName=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["app-blog-info"]],inputs:{Info:"Info",Author_FullName:"Author_FullName"},decls:39,vars:31,consts:[[1,"m-b-10"],[1,"card-title"],[1,"text-muted"],[1,"fa","fa-clock-o"],[4,"ngIf"],[1,"m-t-10"],[1,"row"],[1,"col-md-10"],[1,"card-text","m-b-5",3,"innerHTML"],[1,"btn","btn-primary","text-white",3,"routerLink"],[1,"card-text"],["class","badge badge-danger  m-r-5",4,"ngIf"],["class","badge badge-success  m-r-5",4,"ngIf"],["class","badge badge-info  m-r-5",4,"ngIf"],["class","badge badge-warning  m-r-5",4,"ngIf"],["class","badge badge-primary  m-r-5",4,"ngIf"],[1,"col-md-2","text-center"],[1,"m-b-10",3,"routerLink"],[1,"img-thumbnail",3,"src","alt"],[1,"card-title",3,"routerLink"],[1,"img-responsive",2,"cursor","pointer",3,"src","alt"],["class","col-md-3 m-t-10",4,"ngFor","ngForOf"],[1,"col-md-3","m-t-10"],[3,"src","alt"],[4,"ngFor","ngForOf"],[1,"btn","btn-info","m-r-5",3,"routerLink"],[1,"btn","btn-danger","m-r-5",3,"routerLink"],[1,"badge","badge-danger","m-r-5"],[1,"badge","badge-success","m-r-5"],[1,"badge","badge-info","m-r-5"],[1,"badge","badge-warning","m-r-5"],[1,"badge","badge-primary","m-r-5"]],template:function(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"div",0),a.Qb(2,"h2",1),a.Fc(3),a.Pb(),a.Qb(4,"p"),a.Fc(5," Posted: "),a.Qb(6,"span",2),a.Lb(7,"i",3),a.Pb(),a.Fc(8),a.ec(9,"date"),a.Pb(),a.Pb(),a.Dc(10,D,2,2,"div",4),a.Dc(11,C,3,1,"div",4),a.Qb(12,"div",5),a.Qb(13,"div",6),a.Qb(14,"div",7),a.Lb(15,"div",8),a.Lb(16,"hr"),a.Dc(17,j,6,1,"div",4),a.Dc(18,K,6,1,"div",4),a.Qb(19,"a",9),a.Fc(20),a.Pb(),a.Lb(21,"hr"),a.Qb(22,"p"),a.Fc(23),a.Pb(),a.Qb(24,"p"),a.Fc(25),a.Pb(),a.Lb(26,"hr"),a.Qb(27,"p",10),a.Dc(28,B,2,0,"span",11),a.Dc(29,M,2,0,"span",12),a.Dc(30,H,2,0,"span",13),a.Dc(31,N,2,0,"span",14),a.Dc(32,V,2,0,"span",15),a.Dc(33,z,2,0,"span",11),a.Pb(),a.Pb(),a.Qb(34,"div",16),a.Qb(35,"a",17),a.Lb(36,"img",18),a.Pb(),a.Qb(37,"a",19),a.Fc(38),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&t&&(a.xb(3),a.Gc(e.Info.title),a.xb(5),a.Hc(" ",a.gc(9,22,e.Info.created_at,"fullDate")," "),a.xb(2),a.kc("ngIf",""!==e.Info.cover_url),a.xb(1),a.kc("ngIf",e.Info.files.length>0),a.xb(4),a.kc("innerHTML",e.Info.description,a.vc),a.xb(2),a.kc("ngIf",e.Info.category_list.length>0),a.xb(1),a.kc("ngIf",e.Info.tags_arr.length>0),a.xb(1),a.kc("routerLink",a.oc(25,G,"/blogs/user/"+e.Info.author.id)),a.xb(1),a.Hc("Browse all ",e.Author_FullName," Posts..."),a.xb(3),a.Hc("Views: ",e.Info.views,""),a.xb(2),a.Hc("Liked: ",e.Info.liked,""),a.xb(3),a.kc("ngIf",0==e.Info.isenabled),a.xb(1),a.kc("ngIf",1==e.Info.isenabled),a.xb(1),a.kc("ngIf",1==e.Info.isapproved),a.xb(1),a.kc("ngIf",0==e.Info.isapproved),a.xb(1),a.kc("ngIf",1==e.Info.isfeatured),a.xb(1),a.kc("ngIf",1==e.Info.isadult),a.xb(2),a.kc("routerLink",a.oc(27,G,"/users/profile/"+e.Info.author.id)),a.xb(1),a.lc("src",e.Info.author.img_url,a.wc),a.lc("alt",e.Author_FullName),a.xb(1),a.kc("routerLink",a.oc(29,G,"/users/profile/"+e.Info.author.id)),a.xb(1),a.Gc(e.Author_FullName))},directives:[o.u,n.i,o.t],pipes:[o.f],encapsulation:2}),t})();function U(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",1),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function J(t,e){1&t&&a.Lb(0,"app-loader")}function X(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"div",4),a.Qb(2,"app-toolbar-v2",5),a.bc("Action",(function(e){return a.uc(t),a.dc(2).toolbaraction(e)})),a.Pb(),a.Pb(),a.Qb(3,"div",6),a.Qb(4,"div",7),a.Lb(5,"app-blog-info",8),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc(2);a.xb(2),a.kc("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),a.xb(3),a.kc("Author_FullName",t.Author_FullName)("Info",t.Info)}}function W(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",3),a.Dc(3,J,1,0,"app-loader",0),a.Dc(4,X,6,4,"div",0),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc();a.xb(3),a.kc("ngIf",t.showLoader),a.xb(1),a.kc("ngIf",!t.showLoader)}}let Y=(()=>{class t{constructor(t,e,i,s,o,r,n,a){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.route=o,this.formService=r,this.permission=n,this.router=a,this.isItemsSelected=!0,this.RecordID=0,this.FilterOptions={},this.controls=[],this.showLoader=!1,this.formHeading="Blog Detail",this.submitText="Submit",this.Info={},this.uploadedFiles=[],this.SelectedItems=[],this.Author_FullName="",this.auth$=this._store.pipe(Object(c.n)(b.a)),this.isAccessGranted=!1,this.isActionGranded=!1}ngOnInit(){this.auth$.subscribe(t=>{const e="1521396112858";this.permission.GrandResourceAccess(!1,e,"1521396141248",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}),this.ToolbarOptions=this.settingService.getToolbarOptions(!0),this.ToolbarOptions.showtoolbar=!1,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!0,this.ToolbarOptions.ProfileView=!0,this.route.params.subscribe(t=>{this.RecordID=this.coreService.decrypt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0&&this.LoadInfo()})}LoadInfo(){this.showLoader=!0,this.dataService.GetInfo(this.RecordID).subscribe(t=>{"error"===t.status?(this._store.dispatch(new l.c({title:t.message,text:"",css:"bg-success"})),this.router.navigate(["/blogs"])):(this.Info=t.post,this.Author_FullName=null===this.Info.author.firstname||""===this.Info.author.firstname?this.Info.author.username:this.Info.author.firstname+" "+this.Info.author.lastname,this.Info.tags_arr=null!==this.Info.tags&&""!==this.Info.tags?this.ProcessCategories(this.Info.tags.split(",")):[],this.Info.enc_id=this.coreService.encrypt(this.Info.id),this.SelectedItems=[],this.SelectedItems.push(this.Info)),this.showLoader=!1})}ProcessCategories(t){const e=[];for(const i of t)e.push({title:i.trim(),slug:i.trim().replace(/\s+/g,"-").toLowerCase()});return e}toolbaraction(t){switch(t.action){case"m_markas":this.ProcessActions(t.value);break;case"add":return void this.router.navigate(["/blogs/process/0"]);case"edit":return void this.router.navigate(["/blogs/process/"+this.Info.enc_id])}}ProcessActions(t){if(this.isActionGranded){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus,e.isadult=0;this.dataService.ProcessActions(this.SelectedItems,t),"delete"===t.actionstatus&&this.router.navigate(["/blogs/"])}}else this._store.dispatch(new l.c({title:"Permission Denied",text:"",css:"bg-danger"}))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(c.h),a.Kb(u.a),a.Kb(g.a),a.Kb(f.a),a.Kb(n.a),a.Kb(Q.a),a.Kb(m.a),a.Kb(n.f))},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Cc("@fadeInAnimation",void 0)},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-12"],[1,"m-b-10"],[3,"Options","isItemsSelected","Action"],[1,"card"],[1,"card-body"],[3,"Author_FullName","Info"]],template:function(t,e){1&t&&(a.Dc(0,U,3,0,"div",0),a.Dc(1,W,5,2,"div",0)),2&t&&(a.kc("ngIf",!e.isAccessGranted),a.xb(1),a.kc("ngIf",e.isAccessGranted))},directives:[o.u,F.a,I.a,E],encapsulation:2,data:{animation:[x.a]}}),t})();var q=i("r+k1");let Z=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,y.a,n.j,r.l,q.a]]}),t})();var tt=i("zIGt"),et=i("YaUu"),it=i("OgBg"),st=i("+kG/");function ot(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",1),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function rt(t,e){1&t&&a.Lb(0,"app-loader")}function nt(t,e){if(1&t){const t=a.Rb();a.Qb(0,"dynamic-modal-form",9),a.bc("OnSubmit",(function(e){return a.uc(t),a.dc(2).SubmitForm(e)})),a.Pb()}if(2&t){const t=a.dc(2);a.kc("controls",t.controls)("showLoader",t.showLoader)("showCancel",!1)("showModal",!1)("submitText",t.submitText)}}function at(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h3"),a.Fc(2,"No Categories Found"),a.Pb(),a.Qb(3,"p"),a.Fc(4,"Please add one or more categories via "),a.Qb(5,"mark"),a.Fc(6,"Settings -> Categories"),a.Pb(),a.Fc(7," Management Section"),a.Pb(),a.Pb())}function ct(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",3),a.Qb(3,"div",4),a.Qb(4,"div",5),a.Qb(5,"h4",6),a.Fc(6),a.Pb(),a.Pb(),a.Qb(7,"div",7),a.Dc(8,rt,1,0,"app-loader",0),a.Dc(9,nt,1,5,"dynamic-modal-form",8),a.Dc(10,at,8,0,"div",0),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc();a.xb(6),a.Gc(t.formHeading),a.xb(2),a.kc("ngIf",t.showLoader),a.xb(1),a.kc("ngIf",!t.showLoader&&t.Categories.length>0),a.xb(1),a.kc("ngIf",0===t.Categories.length)}}let dt=(()=>{class t{constructor(t,e,i,s,o,r,n,a,h){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.route=o,this.permission=r,this.formService=n,this.categoryDataService=a,this.router=h,this.categories$=this._store.pipe(Object(c.n)(d.a)),this.dropdown_categories$=this._store.pipe(Object(c.n)(it.a)),this.settings$=this._store.pipe(Object(c.n)(d.j)),this.isloaded$=this._store.pipe(Object(c.n)(d.c)),this.auth$=this._store.pipe(Object(c.n)(b.a)),this.configs$=this._store.pipe(Object(c.n)(p.a)),this.isAdmin=!0,this.route_path="/blogs/",this.isAccessGranted=!1,this.isActionGranded=!1,this.RecordID=0,this.controls=[],this.showLoader=!1,this.formHeading="Add Post",this.submitText="Create Post",this.IsLoaded=!1,this.Categories=[],this.Auth={},this.Settings={}}ngOnInit(){this.auth$.subscribe(t=>{if(this.Auth=t,this.isAdmin){const e="1521396112858";this.permission.GrandResourceAccess(!1,e,"1521396141248",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}else this.isAccessGranted=!0,this.isActionGranded=!0}),this.settings$.subscribe(t=>{this.Settings=t}),this.route.params.subscribe(t=>{this.RecordID=this.coreService.decrypt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0?(this.formHeading="Update Information",this.submitText="Save Changes",this.Initialize()):this.initializeControls(this.settingService.getInitObject())}),this.categories$.subscribe(t=>{t.length>0?(this.Categories=t,this.updateCategories()):(this.showLoader=!0,this.categoryDataService.LoadDropdownCategories(6))}),this.dropdown_categories$.subscribe(t=>{t.length>0&&(this.Categories=t,this.updateCategories()),this.showLoader=!1}),this.isloaded$.subscribe(t=>{this.IsLoaded=t,this.IsLoaded||this.Redirect()})}Initialize(){this.RecordID>0?this.isAdmin?this.LoadInfo():this.dataService.Authorize_Author({id:this.RecordID,userid:this.Auth.User.id}).subscribe(t=>{t.isaccess?this.LoadInfo():this.Redirect()},t=>{this.Redirect()}):this.Redirect()}Redirect(){this.router.navigate([this.route_path])}LoadInfo(){this.showLoader=!0,this.dataService.GetInfo(this.RecordID).subscribe(t=>{"success"===t.status?this.initializeControls(t.post):(this._store.dispatch(new l.c({title:t.message,text:"",css:"bg-danger"})),this.initializeControls(this.settingService.getInitObject())),this.showLoader=!1})}updateCategories(){this.coreService.updateCategories(this.controls,this.Categories)}initializeControls(t){this.controls=this.formService.getControls(t,this.Auth,this.Settings.general),this.updateCategories()}SubmitForm(t){if(!this.isActionGranded)return void this._store.dispatch(new l.c({title:"Permission Denied",text:"",css:"bg-danger"}));this.showLoader=!0;let e="Added";this.RecordID>0&&(t.id=this.RecordID,e="Updated"),t.userid=this.Auth.User.id,t.isadmin=this.isAdmin,t.categories=this.coreService.returnSelectedCategoryArray(t.categories),this.dataService.AddRecord(t).subscribe(t=>{"error"===t.status?this._store.dispatch(new l.c({title:t.message,text:"",css:"bg-danger"})):(this._store.dispatch(new l.c({title:"Record "+e+" Successfully",text:"",css:"bg-success"})),this._store.dispatch(new h.i({})),this.router.navigate(this.isAdmin?[this.route_path+"profile/"+t.record.id]:[this.route_path])),this.showLoader=!1},t=>{this.showLoader=!1,this._store.dispatch(new l.c({title:"Error Occured",text:"",css:"bg-danger"}))})}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(c.h),a.Kb(u.a),a.Kb(g.a),a.Kb(f.a),a.Kb(n.a),a.Kb(m.a),a.Kb(Q.a),a.Kb(tt.a),a.Kb(n.f))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-blog-process"]],inputs:{isAdmin:"isAdmin",route_path:"route_path"},features:[a.wb([tt.a,et.a])],decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(a.Dc(0,ot,3,0,"div",0),a.Dc(1,ct,11,4,"div",0)),2&t&&(a.kc("ngIf",!e.isAccessGranted),a.xb(1),a.kc("ngIf",e.isAccessGranted))},directives:[o.u,F.a,st.a],encapsulation:2,data:{animation:[x.a]}}),t})(),ht=(()=>{class t{constructor(){this.isAdmin=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"isAdmin"]],template:function(t,e){1&t&&a.Lb(0,"app-blog-process",0),2&t&&a.kc("isAdmin",e.isAdmin)},directives:[dt],encapsulation:2,data:{animation:[x.a]}}),t})();var lt=i("omRQ");let bt=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},providers:[u.a,g.a,Q.a],imports:[[o.c,y.a,n.j,r.l,lt.b]]}),t})();function pt(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",1),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function ut(t,e){1&t&&a.Lb(0,"app-loader")}function gt(t,e){if(1&t&&(a.Qb(0,"div"),a.Lb(1,"google-chart",5),a.Pb()),2&t){const t=a.dc(2);a.xb(1),a.kc("data",t.tooltipChart)}}function ft(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",6),a.Qb(2,"h3",7),a.Fc(3),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc(2);a.xb(3),a.Hc(" ",t.message," ")}}function mt(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",3),a.Qb(3,"app-toolbar-v2",4),a.bc("Action",(function(e){return a.uc(t),a.dc().toolbaraction(e)})),a.Pb(),a.Dc(4,ut,1,0,"app-loader",0),a.Dc(5,gt,2,1,"div",0),a.Dc(6,ft,4,1,"div",0),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc();a.xb(3),a.kc("isAdmin",t.isAdmin)("Options",t.ToolbarOptions),a.xb(1),a.kc("ngIf",t.showLoader),a.xb(1),a.kc("ngIf",!t.showLoader&&t.optionSelected),a.xb(1),a.kc("ngIf",!t.showLoader&&!t.optionSelected)}}const vt=[{path:"",data:{title:"Blogs Management",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Management"}]},component:S},{path:"tag/:tagname",data:{title:"Blogs Management",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Management"}]},component:S},{path:"category/:catname",data:{title:"Blogs Management",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Management"}]},component:S},{path:"user/:uname",data:{title:"Blogs Management",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Management"}]},component:S},{path:"filter/:abuse",data:{title:"Blogs Management (Reported)",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Reported Posts"}]},component:S},{path:"profile/:id",data:{title:"Blog Information",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Blog Information"}]},component:Y},{path:"reports",data:{title:"Report Builder",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Report Builder"}]},component:(()=>{class t{constructor(t,e,i,s,o,r,n,a){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.route=o,this.formService=r,this.permission=n,this.router=a,this.FilterOptions={},this.showLoader=!1,this.formHeading="Blog Reports",this.isAdmin=!0,this.optionSelected=!1,this.ChartType="ColumnChart",this.message="Please select report type to generate!",this.filteroptions$=this._store.pipe(Object(c.n)(d.b)),this.auth$=this._store.pipe(Object(c.n)(b.a)),this.isAccessGranted=!1,this.isActionGranded=!1,this.tooltipChart={chartType:"ColumnChart",dataTable:[],options:{title:"Articles Posted",legend:"none",width:1e3,height:500,is3D:!0}}}ngOnInit(){this.auth$.subscribe(t=>{const e="1521396112858";this.permission.GrandResourceAccess(!1,e,"1521396141248",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}),this.filteroptions$.subscribe(t=>{this.FilterOptions=Object.assign({},t)}),this.ToolbarOptions=this.settingService.getToolbarOptions(!0),this.ToolbarOptions.showtoolbar=!0,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!1,this.ToolbarOptions.left_options=this.prepareLeftOptions(),this.ToolbarOptions.right_options=this.prepareRightOptions(),this.ToolbarOptions.right_options[0].title=this.ChartType}prepareLeftOptions(){return[{title:"Select Type",ismultiple:!0,Options:[{id:1,title:"Yearly",value:0,isclick:!0,clickevent:"reporty_type",tooltip:"Generate yearly report"},{id:2,title:"Monthly (Last 12 Months)",value:1,isclick:!0,clickevent:"reporty_type",tooltip:"Generate monthly report"},{id:3,title:"Daily (Current Month)",value:2,isclick:!0,clickevent:"reporty_type",tooltip:"Generate daily report"}]}]}prepareRightOptions(){return[{title:"Chart Type",ismultiple:!0,Options:[{id:1,title:"ColumnChart",value:"ColumnChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Column Chart"},{id:2,title:"BarChart",value:"BarChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Bar Chart"},{id:3,title:"LineChart",value:"LineChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Line Chart"},{id:3,title:"PieChart",value:"PieChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Pie Chart"}]}]}toolbaraction(t){if(this.isActionGranded){switch(t.action){case"chart_type":this.ChartType=t.value,console.log("chart type is "+this.ChartType),this.showLoader=!0,this.ToolbarOptions.right_options[0].title=this.ChartType,this.FilterOptions.chartType=this.ChartType,this.showLoader=!1;break;case"reporty_type":this.FilterOptions.reporttype=t.value}this.LoadReports()}else this._store.dispatch(new l.c({title:"Permission Denied",text:"",css:"bg-danger"}))}LoadReports(){this.showLoader=!0,this.dataService.LoadReports(this.FilterOptions).subscribe(t=>{this.tooltipChart.chartType=this.ChartType,t.data.dataTable.length>1?(this.tooltipChart.dataTable=t.data.dataTable,this.optionSelected=!0):(this.message="No Data Available!",this.optionSelected=!1),this.showLoader=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(c.h),a.Kb(u.a),a.Kb(g.a),a.Kb(f.a),a.Kb(n.a),a.Kb(Q.a),a.Kb(m.a),a.Kb(n.f))},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Cc("@fadeInAnimation",void 0)},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],[3,"isAdmin","Options","Action"],[3,"data"],[2,"padding","80px 0px"],[2,"text-align","center"]],template:function(t,e){1&t&&(a.Dc(0,pt,3,0,"div",0),a.Dc(1,mt,7,5,"div",0)),2&t&&(a.kc("ngIf",!e.isAccessGranted),a.xb(1),a.kc("ngIf",e.isAccessGranted))},directives:[o.u,I.a,F.a,lt.a],encapsulation:2,data:{animation:[x.a]}}),t})()},{path:"process/:id",data:{title:"Process Post",urls:[{title:"Dashboard",url:"/"},{title:"Blogs",url:"/blogs"},{title:"Process Post"}]},component:ht}];let It=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,r.l,y.a,L,Z,s.c,q.a,bt,n.j.forChild(vt)]]}),t})()},pdjO:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var s=i("R0Ic");const o=Object(s.k)("fadeInAnimation",[Object(s.j)(":enter",[Object(s.i)({opacity:0,background:"#ff0000"}),Object(s.e)(".8s",Object(s.i)({opacity:1}))])])}}]);