(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{rwzO:function(t,e,i){"use strict";i.r(e),i.d(e,"ForumTopicsModule",(function(){return V}));var s=i("1kSV"),o=i("ofXK"),r=i("3Pt+"),n=i("tyNb"),a=i("fXoL"),c=i("JJ5z");let l=(()=>{class t{constructor(){this.isAdmin=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"isAdmin"]],template:function(t,e){1&t&&a.Lb(0,"app-mainforum-list",0),2&t&&a.kc("isAdmin",e.isAdmin)},directives:[c.a],encapsulation:2}),t})();var d=i("o+qO"),h=i("pJ0w");let p=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,d.a,n.j,r.l,h.a]]}),t})();var b=i("xp6A");let u=(()=>{class t{constructor(){this.isAdmin=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"isAdmin"]],template:function(t,e){1&t&&a.Lb(0,"app-forumtopic-process",0),2&t&&a.kc("isAdmin",e.isAdmin)},directives:[b.a],encapsulation:2}),t})();var m=i("dSJ/"),f=i("xnmw"),v=i("SeUu");let g=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},providers:[m.a,f.a,v.a],imports:[[o.c,d.a,n.j,r.l]]}),t})();var I=i("l7P3"),y=i("XDFV"),P=i("LEd3"),w=i("pdjO"),A=i("nD3/"),O=i("Hjmt"),k=i("RDfn"),T=i("4HLj"),L=i("+kG/");let F=(()=>{class t{constructor(t,e,i,s){this._store=t,this.activeModal=e,this.service=i,this.dataService=s,this.showLoader=!1,this.list=[]}ngOnInit(){this.title=this.Info.title,this.controls=this.service.getReplyControls(this.Info.data)}SubmitForm(t){if(void 0!==this.Info.isActionGranded&&!this.Info.isActionGranded)return void this._store.dispatch(new P.c({title:"Permission Denied",text:"",css:"bg-danger"}));t.replyid=this.Info.data.replyid,t.title=this.Info.data.title,t.userid=this.Info.data.userid,t.forumid=this.Info.data.forumid,t.id=this.Info.data.id;let e="Added";this.Info.data.id>0&&(t.id=this.Info.data.id,e="Updated"),this.showLoader=!0,this.dataService.AddRecord(t).subscribe(t=>{"error"===t.status?this._store.dispatch(new P.c({title:t.message,text:"",css:"bg-danger"})):(this._store.dispatch(new P.c({title:"Record "+e+" Successfully",text:"",css:"bg-success"})),this.activeModal.close({data:t.record,isenabled:e})),this.showLoader=!1},t=>{this.showLoader=!1,this._store.dispatch(new P.c({title:"Error Occured",text:"",css:"bg-danger"}))})}close(){this.activeModal.dismiss("Cancel Clicked")}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(I.h),a.Kb(s.a),a.Kb(v.a),a.Kb(f.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["viewmodal"]],inputs:{Info:"Info"},features:[a.wb([v.a,f.a])],decls:7,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"controls","showLoader","OnSubmit","OnClose"]],template:function(t,e){1&t&&(a.Qb(0,"div",0),a.Qb(1,"h4",1),a.Fc(2),a.Pb(),a.Qb(3,"button",2),a.bc("click",(function(){return e.activeModal.dismiss("Cross click")})),a.Qb(4,"span",3),a.Fc(5,"\xd7"),a.Pb(),a.Pb(),a.Pb(),a.Qb(6,"dynamic-modal-form",4),a.bc("OnSubmit",(function(t){return e.SubmitForm(t)}))("OnClose",(function(){return e.close()})),a.Pb()),2&t&&(a.xb(2),a.Gc(e.title),a.xb(4),a.kc("controls",e.controls)("showLoader",e.showLoader))},directives:[L.a],encapsulation:2}),t})();function S(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"h2"),a.Fc(2),a.Pb(),a.Lb(3,"hr"),a.Pb()),2&t){const t=a.dc().$implicit;a.xb(2),a.Gc(t.title)}}function C(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div",3),a.Qb(1,"div",4),a.Qb(2,"div",5),a.Qb(3,"div",6),a.Dc(4,S,4,1,"div",7),a.Qb(5,"div",3),a.Qb(6,"div",4),a.Qb(7,"p"),a.Fc(8," Posted: "),a.Qb(9,"span",8),a.Lb(10,"i",9),a.Pb(),a.Fc(11),a.ec(12,"date"),a.Pb(),a.Lb(13,"hr"),a.Lb(14,"div",10),a.Pb(),a.Qb(15,"div",11),a.Qb(16,"a",12),a.bc("click",(function(i){a.uc(t);const s=e.$implicit;return a.dc().edit(s,i),!1})),a.Lb(17,"i",13),a.Pb(),a.Qb(18,"a",12),a.bc("click",(function(i){a.uc(t);const s=e.$implicit,o=e.index;return a.dc().delete(s,o,i),!1})),a.Lb(19,"i",14),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=e.$implicit,i=e.index;a.xb(4),a.kc("ngIf",0===i),a.xb(7),a.Hc(" ",a.gc(12,3,t.created_at,"fullDate")," "),a.xb(3),a.kc("innerHTML",t.description,a.vc)}}let Q=(()=>{class t{constructor(t,e,i,s){this._store=t,this.modalService=e,this.settingService=i,this.dataService=s,this.auth$=this._store.pipe(Object(I.n)(y.a)),this.Info={},this.Author_FullName="",this.Auth={}}ngOnInit(){this.auth$.subscribe(t=>{this.Auth=t})}PostReply(){if(this.Info.length>0){const t=this.settingService.getInitObject();t.userid=this.Auth.User.id,t.forumid=this.Info[0].forumid,t.replyid=this.Info[0].id,t.title="Re - "+this.Info[0].title,this.TriggleModal(t)}}edit(t,e){this.TriggleModal(t),e.stopPropagation()}TriggleModal(t){let e="Post Reply";t.id>0&&(e="Update Post");const i=this.modalService.open(F,{backdrop:!1});i.componentInstance.Info={title:e,data:t,viewType:0},i.result.then(t=>{if("Added"===t.isenabled)this.Info.push(t.data);else for(const e of this.Info)e.id===t.data.id&&(e.description=t.data.description)},t=>{console.log("dismissed")})}delete(t,e,i){!0===confirm("Are you sure you want to delete selected post?")&&(e>-1&&this.Info.splice(e,1),this.dataService.DeleteRecord(t,e)),i.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(I.h),a.Kb(s.b),a.Kb(m.a),a.Kb(f.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-forumtopics-info"]],inputs:{Info:"Info",Author_FullName:"Author_FullName"},decls:5,vars:1,consts:[["class","row",4,"ngFor","ngForOf"],[1,"m-b-10","m-t-10"],[1,"btn","btn-primary",3,"click"],[1,"row"],[1,"col-md-10"],[1,"card"],[1,"card-body"],[4,"ngIf"],[1,"text-muted"],[1,"fa","fa-clock-o"],[1,"card-text","m-b-5",3,"innerHTML"],[1,"col-md-2"],["href","#",1,"m-l-5",3,"click"],[1,"fa","fa-pencil","text-inverse","m-r-10"],[1,"fa","fa-close","text-danger"]],template:function(t,e){1&t&&(a.Dc(0,C,20,6,"div",0),a.Lb(1,"hr"),a.Qb(2,"div",1),a.Qb(3,"button",2),a.bc("click",(function(){return e.PostReply()})),a.Fc(4,"Post Reply"),a.Pb(),a.Pb()),2&t&&a.kc("ngForOf",e.Info)},directives:[o.t,o.u],pipes:[o.f],encapsulation:2}),t})();function x(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",1),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function D(t,e){1&t&&a.Lb(0,"app-loader")}function R(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"div",4),a.Qb(2,"app-toolbar-v2",5),a.bc("Action",(function(e){return a.uc(t),a.dc(2).toolbaraction(e)})),a.Pb(),a.Pb(),a.Qb(3,"div",6),a.Qb(4,"div",7),a.Lb(5,"app-forumtopics-info",8),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc(2);a.xb(2),a.kc("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),a.xb(3),a.kc("Author_FullName",t.Author_FullName)("Info",t.Info)}}function _(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",3),a.Dc(3,D,1,0,"app-loader",0),a.Dc(4,R,6,4,"div",0),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc();a.xb(3),a.kc("ngIf",t.showLoader),a.xb(1),a.kc("ngIf",!t.showLoader)}}let G=(()=>{class t{constructor(t,e,i,s,o,r,n,a){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.route=o,this.formService=r,this.permission=n,this.router=a,this.isItemsSelected=!0,this.RecordID=0,this.FilterOptions={},this.controls=[],this.showLoader=!1,this.formHeading="Blog Detail",this.submitText="Submit",this.Info={},this.uploadedFiles=[],this.SelectedItems=[],this.Author_FullName="",this.auth$=this._store.pipe(Object(I.n)(y.a)),this.isAccessGranted=!1,this.isActionGranded=!1}ngOnInit(){this.auth$.subscribe(t=>{const e="1521395897976";this.permission.GrandResourceAccess(!1,e,"1521395939384",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}),this.ToolbarOptions=this.settingService.getToolbarOptions(!0),this.ToolbarOptions.showtoolbar=!1,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!0,this.ToolbarOptions.ProfileView=!0,this.route.params.subscribe(t=>{this.RecordID=this.coreService.decrypt(t.id),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0&&this.LoadInfo()})}LoadInfo(){this.showLoader=!0,this.dataService.GetInfo(this.RecordID).subscribe(t=>{if("error"===t.status)this._store.dispatch(new P.c({title:t.message,text:"",css:"bg-success"})),this.router.navigate(["/forumtopics"]);else{this.Info=t.posts,this.SelectedItems=[];for(const t of this.Info)this.SelectedItems.push(t)}this.showLoader=!1})}toolbaraction(t){switch(t.action){case"m_markas":this.ProcessActions(t.value);break;case"add":return void this.router.navigate(["/forumtopics/process/0"]);case"edit":return void this.router.navigate(["/forumtopics/process/"+this.Info.id])}}ProcessActions(t){if(this.isActionGranded){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus;this.dataService.ProcessActions(this.SelectedItems,t),"delete"===t.actionstatus&&this.router.navigate(["/forumtopics/"])}}else this._store.dispatch(new P.c({title:"Permission Denied",text:"",css:"bg-danger"}))}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(I.h),a.Kb(m.a),a.Kb(f.a),a.Kb(A.a),a.Kb(n.a),a.Kb(v.a),a.Kb(O.a),a.Kb(n.f))},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Cc("@fadeInAnimation",void 0)},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],[1,"m-b-10"],[3,"Options","isItemsSelected","Action"],[1,"card"],[1,"card-body"],[3,"Author_FullName","Info"]],template:function(t,e){1&t&&(a.Dc(0,x,3,0,"div",0),a.Dc(1,_,5,2,"div",0)),2&t&&(a.kc("ngIf",!e.isAccessGranted),a.xb(1),a.kc("ngIf",e.isAccessGranted))},directives:[o.u,k.a,T.a,Q],encapsulation:2,data:{animation:[w.a]}}),t})();var K=i("omRQ");let M=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},providers:[m.a,f.a,v.a],imports:[[o.c,d.a,n.j,r.l,K.b]]}),t})();var j=i("PCgb");function H(t,e){1&t&&(a.Qb(0,"div"),a.Qb(1,"h2",1),a.Fc(2,"Access Denied"),a.Pb(),a.Pb())}function $(t,e){1&t&&a.Lb(0,"app-loader")}function N(t,e){if(1&t&&(a.Qb(0,"div"),a.Lb(1,"google-chart",5),a.Pb()),2&t){const t=a.dc(2);a.xb(1),a.kc("data",t.tooltipChart)}}function E(t,e){if(1&t&&(a.Qb(0,"div"),a.Qb(1,"div",6),a.Qb(2,"h3",7),a.Fc(3),a.Pb(),a.Pb(),a.Pb()),2&t){const t=a.dc(2);a.xb(3),a.Hc(" ",t.message," ")}}function B(t,e){if(1&t){const t=a.Rb();a.Qb(0,"div"),a.Qb(1,"div",2),a.Qb(2,"div",3),a.Qb(3,"app-toolbar-v2",4),a.bc("Action",(function(e){return a.uc(t),a.dc().toolbaraction(e)})),a.Pb(),a.Dc(4,$,1,0,"app-loader",0),a.Dc(5,N,2,1,"div",0),a.Dc(6,E,4,1,"div",0),a.Pb(),a.Pb(),a.Pb()}if(2&t){const t=a.dc();a.xb(3),a.kc("isAdmin",t.isAdmin)("Options",t.ToolbarOptions),a.xb(1),a.kc("ngIf",t.showLoader),a.xb(1),a.kc("ngIf",!t.showLoader&&t.optionSelected),a.xb(1),a.kc("ngIf",!t.showLoader&&!t.optionSelected)}}const J=[{path:"",data:{title:"Forums Topics Management",urls:[{title:"Dashboard",url:"/"},{title:"Forums",url:"/forums"},{title:"Management"}]},component:l},{path:"forum/:id",data:{title:"Forums Topics Management",urls:[{title:"Dashboard",url:"/"},{title:"Forums",url:"/forums"},{title:"Management"}]},component:l},{path:"tag/:tagname",data:{title:"Forums Topics Management",urls:[{title:"Dashboard",url:"/"},{title:"Forums",url:"/forums"},{title:"Management"}]},component:l},{path:"user/:uname",data:{title:"Forums Topics Management",urls:[{title:"Dashboard",url:"/"},{title:"Forums",url:"/forums"},{title:"Management"}]},component:l},{path:"filter/:abuse",data:{title:"Forums Topics Management (Reported)",urls:[{title:"Dashboard",url:"/"},{title:"Forums",url:"/forums"},{title:"Reported Topics"}]},component:l},{path:"profile/:id",data:{title:"Forum Topic Information",urls:[{title:"Dashboard",url:"/"},{title:"Forum Topics",url:"/forumtopics"},{title:"Forum Topics Information"}]},component:G},{path:"reports",data:{title:"Reports Overview",urls:[{title:"Dashboard",url:"/"},{title:"Forum Topics",url:"/forumtopics"},{title:"Reports Overview"}]},component:(()=>{class t{constructor(t,e,i,s,o,r,n,a){this._store=t,this.settingService=e,this.dataService=i,this.coreService=s,this.route=o,this.formService=r,this.permission=n,this.router=a,this.FilterOptions={},this.showLoader=!1,this.formHeading="Forum Topic Reports",this.isAdmin=!0,this.optionSelected=!1,this.ChartType="ColumnChart",this.message="Please select report type to generate!",this.filteroptions$=this._store.pipe(Object(I.n)(j.b)),this.auth$=this._store.pipe(Object(I.n)(y.a)),this.isAccessGranted=!1,this.isActionGranded=!1,this.tooltipChart={chartType:"ColumnChart",dataTable:[],options:{title:"Forum Topics Posted",legend:"none",width:1e3,height:500,is3D:!0}}}ngOnInit(){this.auth$.subscribe(t=>{const e="1521396112858";this.permission.GrandResourceAccess(!1,e,"1521396141248",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction(e,t.Role)&&(this.isActionGranded=!0))}),this.filteroptions$.subscribe(t=>{this.FilterOptions=Object.assign({},t)}),this.ToolbarOptions=this.settingService.getToolbarOptions(!0),this.ToolbarOptions.showtoolbar=!0,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!1,this.ToolbarOptions.left_options=this.prepareLeftOptions(),this.ToolbarOptions.right_options=this.prepareRightOptions(),this.ToolbarOptions.right_options[0].title=this.ChartType}prepareLeftOptions(){return[{title:"Select Type",ismultiple:!0,Options:[{id:1,title:"Yearly",value:0,isclick:!0,clickevent:"reporty_type",tooltip:"Generate yearly report"},{id:2,title:"Monthly (Last 12 Months)",value:1,isclick:!0,clickevent:"reporty_type",tooltip:"Generate monthly report"},{id:3,title:"Daily (Current Month)",value:2,isclick:!0,clickevent:"reporty_type",tooltip:"Generate daily report"}]}]}prepareRightOptions(){return[{title:"Chart Type",ismultiple:!0,Options:[{id:1,title:"ColumnChart",value:"ColumnChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Column Chart"},{id:2,title:"BarChart",value:"BarChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Bar Chart"},{id:3,title:"LineChart",value:"LineChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Line Chart"},{id:3,title:"PieChart",value:"PieChart",isclick:!0,clickevent:"chart_type",tooltip:"Generate Pie Chart"}]}]}toolbaraction(t){if(this.isActionGranded){switch(t.action){case"chart_type":this.ChartType=t.value,this.showLoader=!0,this.ToolbarOptions.right_options[0].title=this.ChartType,this.FilterOptions.chartType=this.ChartType,this.showLoader=!1;break;case"reporty_type":this.FilterOptions.reporttype=t.value}this.LoadReports()}else this._store.dispatch(new P.c({title:"Permission Denied",text:"",css:"bg-danger"}))}LoadReports(){this.showLoader=!0,this.dataService.LoadReports(this.FilterOptions).subscribe(t=>{this.tooltipChart.chartType=this.ChartType,t.data.dataTable.length>1?(this.tooltipChart.dataTable=t.data.dataTable,this.optionSelected=!0):(this.message="No Data Available!",this.optionSelected=!1),this.showLoader=!1})}}return t.\u0275fac=function(e){return new(e||t)(a.Kb(I.h),a.Kb(m.a),a.Kb(f.a),a.Kb(A.a),a.Kb(n.a),a.Kb(v.a),a.Kb(O.a),a.Kb(n.f))},t.\u0275cmp=a.Eb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Cc("@fadeInAnimation",void 0)},decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-12"],[3,"isAdmin","Options","Action"],[3,"data"],[2,"padding","80px 0px"],[2,"text-align","center"]],template:function(t,e){1&t&&(a.Dc(0,H,3,0,"div",0),a.Dc(1,B,7,5,"div",0)),2&t&&(a.kc("ngIf",!e.isAccessGranted),a.xb(1),a.kc("ngIf",e.isAccessGranted))},directives:[o.u,T.a,k.a,K.a],encapsulation:2,data:{animation:[w.a]}}),t})()},{path:"process/:id",data:{title:"Process Post",urls:[{title:"Dashboard",url:"/"},{title:"Forum Topics",url:"/forumtopics"},{title:"Process Post"}]},component:u}];let V=(()=>{class t{}return t.\u0275mod=a.Ib({type:t}),t.\u0275inj=a.Hb({factory:function(e){return new(e||t)},imports:[[o.c,r.l,d.a,g,p,s.c,h.a,M,n.j.forChild(J)]]}),t})()}}]);